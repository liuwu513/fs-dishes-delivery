webpackJsonp([14],{192:function(e,t,r){r(435);var a=r(86)(r(303),r(458),null,null);e.exports=a.exports},210:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(50),o=r.n(a),n=r(49),i=r.n(n),s=r(51),l=r.n(s),d=r(87),c=r(88),u=r(89);t.default={data:function(){return{baseUrl:c.a}},created:function(){this.adminInfo.id||this.getAdminData()},computed:l()({},r.i(u.b)(["adminInfo"])),methods:l()({},r.i(u.c)(["getAdminData"]),{handleCommand:function(e){var t=this;return i()(o.a.mark(function a(){var n;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if("home"!=e){a.next=4;break}t.$router.push("/manage"),a.next=9;break;case 4:if("singout"!=e){a.next=9;break}return a.next=7,r.i(d.b)();case 7:n=a.sent,1==n.status?(t.$message({type:"success",message:"退出成功"}),t.$router.push("/")):t.$message({type:"error",message:n.message});case 9:case"end":return a.stop()}},a,t)}))()}})}},211:function(e,t,r){t=e.exports=r(187)(!1),t.push([e.i,".allcover{position:absolute;top:0;right:0}.ctt{left:50%;transform:translate(-50%,-50%)}.ctt,.tb{position:absolute;top:50%}.tb{transform:translateY(-50%)}.lr{position:absolute;left:50%;transform:translateX(-50%)}.header_container{background-color:#eff2f7;height:60px;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:center;align-items:center;padding-left:20px}.avator{width:36px;height:36px;border-radius:50%;margin-right:37px}.el-dropdown-menu__item{text-align:center}",""])},212:function(e,t,r){var a=r(211);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r(188)("02d08ad4",a,!0)},213:function(e,t,r){r(212);var a=r(86)(r(210),r(214),null,null);e.exports=a.exports},214:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"header_container"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/manage"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.meta.nabs,function(t,a){return r("el-breadcrumb-item",{key:a},[e._v(e._s(t))])})],2),e._v(" "),r("el-dropdown",{attrs:{"menu-align":"start"},on:{command:e.handleCommand}},[r("img",{staticClass:"avator",attrs:{src:e.baseUrl+e.adminInfo.avatar}}),e._v(" "),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",{attrs:{command:"home"}},[e._v("首页")]),e._v(" "),r("el-dropdown-item",{attrs:{command:"singout"}},[e._v("退出")])],1)],1)],1)},staticRenderFns:[]}},303:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(51),o=r.n(a),n=r(50),i=r.n(n),s=r(49),l=r.n(s),d=r(213),c=r.n(d),u=r(87),m=r(88);t.default={data:function(){return{baseUrl:m.a,limit:10,count:0,tableData:[],tableItem:{},tableFoodData:[],currentPage:1,disable:!0,salePriceDisable:!0,mainOrderForm:{id:null,orderDesc:"",details:"",priceRadio:"1",list:[]},mainOrderRules:{orderDesc:[{required:!0,message:"请输入主单名称",trigger:"blur"}]},unitList:[{value:1,label:"元/斤"},{value:2,label:"元/瓶"},{value:3,label:"元/袋"},{value:4,label:"元/只"},{value:5,label:"元/个"},{value:6,label:"元/板"},{value:7,label:"元/包"},{value:8,label:"元/块"},{value:9,label:"元/件"},{value:10,label:"元/箱"}],controls:!1}},components:{headTop:c.a},created:function(){},activated:function(){this.initData()},computed:{},methods:{handleSizeChange:function(e){console.log("每页 "+e+" 条")},handleCurrentChange:function(e){this.currentPage=e,this.getFoods()},handleDelete:function(e,t){this.tableFoodData.splice(e,1)},choosePrice:function(){"1"==this.mainOrderForm.priceRadio?this.salePriceDisable=!0:this.salePriceDisable=!1},cancel:function(){this.tableFoodData=[],this.$router.push({path:"orderList"})},initData:function(){var e=this;return l()(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.mainOrderForm={id:null,orderDesc:"",details:"",priceRadio:"1",list:[]},e.tableFoodData=[],e.mainOrderForm.id=e.$route.query.mainOrderId,void 0!==e.mainOrderForm.id){t.next=5;break}return t.abrupt("return",!1);case 5:void 0!==e.mainOrderForm.id&&e.getMainOrder();case 6:case"end":return t.stop()}},t,e)}))()},getMainOrder:function(){var e=this;return l()(i.a.mark(function t(){var a,o;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.i(u.m)({mainOrderId:e.mainOrderForm.id});case 3:a=t.sent,200==a.code?(o=a.data,e.mainOrderForm={id:o.id,orderDesc:o.orderDesc,details:o.details,priceRadio:"1",totalAmount:o.totalAmount,discountAmount:o.discountAmount},o.list.forEach(function(t,r){0==t.costPrice&&(t.costPrice=t.unitPrice),e.tableFoodData.push({id:t.id,name:t.name,mainOrderId:t.mainOrderId,subOrderId:t.subOrderId,costPrice:t.costPrice,foodId:t.foodId,number:t.number,unitPrice:t.unitPrice,unitName:e.unitList[t.unitId-1].label})})):console.log(a),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,e,[[0,7]])}))()},getCustomers:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=this;return l()(i.a.mark(function t(){var r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,getCustomers();case 3:r=t.sent,200==r.code?(r.data.map(function(e,t){e.index=t,e.value=e.id,e.label=e.name}),e.customerList=r.data):console.log(r),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,e,[[0,7]])}))()}),getFoods:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=this;return l()(i.a.mark(function t(){var r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,getFoods({pageNo:e.currentPage,pageSize:e.limit,speciesId:e.queryForm.speciesId,mainOrderId:e.mainOrderForm.mainOrderId,name:e.queryForm.name});case 2:if(r=t.sent,200!=r.code){t.next=9;break}e.count=r.data.total,e.tableData=[],r.data.list.forEach(function(t,r){var a={};a.id=t.id,a.name=t.name,a.speciesId=t.speciesId,a.speciesName=t.speciesName,a.details=t.details,a.imgLink=t.imgLink,a.price=t.price,a.unitId=t.unitId,a.unitName=e.unitList[t.unitId-1].label,a.index=r,e.tableData.push(a)}),t.next=10;break;case 9:throw new Error(r.message);case 10:case"end":return t.stop()}},t,e)}))()}),addMainOrder:function(e){var t=this;this.$refs[e].validate(function(){var e=l()(i.a.mark(function e(a){var n,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=17;break}if(0!==t.tableFoodData.length){e.next=4;break}return t.$message({type:"warning",message:"请选择食品信息"}),e.abrupt("return",!1);case 4:return n=o()({},t.mainOrderForm,{list:t.tableFoodData}),e.prev=5,e.next=8,r.i(u.n)(n);case 8:s=e.sent,200==s.code?(console.log(s),t.$message({type:"success",message:"添加成功"}),t.$router.push({path:"orderList"}),t.mainOrderForm={orderDesc:"",details:"",price:0,unitId:1}):t.$message({type:"error",message:s.message}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),console.log(e.t0);case 15:e.next=19;break;case 17:return t.$notify.error({title:"错误",message:"请检查输入是否正确",offset:100}),e.abrupt("return",!1);case 19:case"end":return e.stop()}},e,t,[[5,12]])}));return function(t){return e.apply(this,arguments)}}())}}}},329:function(e,t,r){t=e.exports=r(187)(!1),t.push([e.i,".allcover{position:absolute;top:0;right:0}.ctt{left:50%;transform:translate(-50%,-50%)}.ctt,.tb{position:absolute;top:50%}.tb{transform:translateY(-50%)}.lr{position:absolute;left:50%;transform:translateX(-50%)}.form{min-width:800px;width:100%;margin-bottom:30px}.form:hover{box-shadow:0 0 8px 0 rgba(232,237,250,.6),0 2px 4px 0 rgba(232,237,250,.5);border-radius:6px;transition:all .4s}.food_form{border:1px solid #eaeefb;padding:10px 0}.el-dialog--small{min-width:680px}.el-table{overflow:hidden;max-width:100%;background-color:#fff;border:1px solid #dfe6ec;font-size:12px;color:#1f2d3d}.el-table,.form_header{width:100%;min-width:800px}.form_header{text-align:center;margin-bottom:10px}.add_category_row{height:0;overflow:hidden;transition:all .4s;background:#f9fafc}.el-input-number{display:inline-block;width:80px;position:relative;line-height:normal}.showEdit{height:185px}.add_category{background:#f9fafc;padding:10px 30px 0 10px;border:1px solid #eaeefb;border-top:none}.species_select{width:100%;border:1px solid #eaeefb;padding:10px 30px 10px 10px;border-top-right-radius:6px;border-top-left-radius:6px}.add_Food_button{min-width:800px;width:100%;text-align:center;line-height:40px;border-bottom-right-radius:6px;border-bottom-left-radius:6px;border:1px solid #eaeefb;border-top:none;transition:all .4s;cursor:pointer}.add_Food_button:hover{background:#f9fafc}.add_Food_button:hover .edit_icon,.add_Food_button:hover span{color:#20a0ff}.add_Food_button span{font-size:14px;color:#999;transition:all .4s}.add_Food_button .edit_icon{color:#ccc;transition:all .4s}.avatar-uploader .el-upload{border:1px dashed #d9d9d9;border-radius:6px;cursor:pointer;position:relative;overflow:hidden}.avatar-uploader .el-upload:hover{border-color:#20a0ff}.avatar-uploader-icon{font-size:28px;color:#8c939d;width:120px;height:120px;line-height:120px;text-align:center}.avatar{width:120px;height:120px;display:block}.cell{text-align:center}",""])},435:function(e,t,r){var a=r(329);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r(188)("718f5c11",a,!0)},458:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("head-top"),e._v(" "),r("el-row",{staticStyle:{"margin-top":"20px"}},[r("el-col",{attrs:{span:14,offset:1}},[r("header",{staticClass:"form_header"},[e._v("配送主单")]),e._v(" "),r("el-form",{ref:"mainOrderForm",staticClass:"form food_form",attrs:{model:e.mainOrderForm,rules:e.mainOrderRules,"label-width":"110px"}},[r("el-form-item",{attrs:{label:"主单名称",prop:"orderDesc"}},[r("el-input",{model:{value:e.mainOrderForm.orderDesc,callback:function(t){e.$set(e.mainOrderForm,"orderDesc",t)},expression:"mainOrderForm.orderDesc"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"总金额"}},[r("el-input",{attrs:{readonly:""},model:{value:e.mainOrderForm.totalAmount,callback:function(t){e.$set(e.mainOrderForm,"totalAmount",t)},expression:"mainOrderForm.totalAmount"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"优惠金额"}},[r("el-input",{attrs:{readonly:""},model:{value:e.mainOrderForm.discountAmount,callback:function(t){e.$set(e.mainOrderForm,"discountAmount",t)},expression:"mainOrderForm.discountAmount"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"备注",prop:"details"}},[r("el-input",{model:{value:e.mainOrderForm.details,callback:function(t){e.$set(e.mainOrderForm,"details",t)},expression:"mainOrderForm.details"}})],1)],1),e._v(" "),r("header",{staticClass:"form_header"},[e._v("选择食品")]),e._v(" "),r("div",[[r("div",[r("el-radio-group",{attrs:{size:"mini"},on:{change:function(t){e.choosePrice()}},model:{value:e.mainOrderForm.priceRadio,callback:function(t){e.$set(e.mainOrderForm,"priceRadio",t)},expression:"mainOrderForm.priceRadio"}},[r("el-radio",{attrs:{label:"1",border:""}},[e._v("仅调整成本价")]),e._v(" "),r("el-radio",{attrs:{label:"2",border:""}},[e._v("调整成本价与配送价")])],1)],1)]],2),e._v(" "),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableFoodData,"row-key":function(e){return e.index}}},[r("el-table-column",{attrs:{type:"index",label:"序号",width:"75"}}),e._v(" "),r("el-table-column",{attrs:{label:"名称",prop:"name","min-width":"100px"}}),e._v(" "),r("el-table-column",{attrs:{label:"数量",prop:"number","min-width":"100px;"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input-number",{attrs:{disabled:e.disable,controls:e.controls,size:"small",min:1,max:1e7},model:{value:t.row.number,callback:function(r){e.$set(t.row,"number",r)},expression:"scope.row.number"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"成本价",prop:"costPrice","min-width":"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input-number",{attrs:{controls:e.controls,size:"small",min:0,max:1e7},model:{value:t.row.costPrice,callback:function(r){e.$set(t.row,"costPrice",r)},expression:"scope.row.costPrice"}}),e._v(" "),r("label",[e._v(e._s(t.row.unitName))])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"成本小计（元）",prop:"sum","min-width":"120px;"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("label",[e._v(e._s(t.row.number*t.row.costPrice))])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"单价",prop:"unitPrice","min-width":"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input-number",{attrs:{disabled:e.salePriceDisable,controls:e.controls,size:"small",min:1,max:1e7},model:{value:t.row.unitPrice,callback:function(r){e.$set(t.row,"unitPrice",r)},expression:"scope.row.unitPrice"}}),e._v(" "),r("label",[e._v(e._s(t.row.unitName))])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"出售小计（元）",prop:"sum","min-width":"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("label",[e._v(e._s(t.row.number*t.row.unitPrice))])]}}])})],1),e._v(" "),r("div",{staticStyle:{margin:"20px 10px",width:"800px"},attrs:{align:"center"}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addMainOrder("mainOrderForm")}}},[e._v("保存")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.cancel()}}},[e._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]}}});