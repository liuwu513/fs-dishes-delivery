webpackJsonp([12],{192:function(e,t,r){r(422);var a=r(86)(r(301),r(443),null,null);e.exports=a.exports},208:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(50),n=r.n(a),o=r(49),i=r.n(o),s=r(51),l=r.n(s),d=r(87),u=r(88),c=r(89);t.default={data:function(){return{baseUrl:u.a}},created:function(){this.adminInfo.id||this.getAdminData()},computed:l()({},r.i(c.b)(["adminInfo"])),methods:l()({},r.i(c.c)(["getAdminData"]),{handleCommand:function(e){var t=this;return i()(n.a.mark(function a(){var o;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if("home"!=e){a.next=4;break}t.$router.push("/manage"),a.next=9;break;case 4:if("singout"!=e){a.next=9;break}return a.next=7,r.i(d.b)();case 7:o=a.sent,1==o.status?(t.$message({type:"success",message:"退出成功"}),t.$router.push("/")):t.$message({type:"error",message:o.message});case 9:case"end":return a.stop()}},a,t)}))()}})}},209:function(e,t,r){t=e.exports=r(187)(!1),t.push([e.i,".allcover{position:absolute;top:0;right:0}.ctt{left:50%;transform:translate(-50%,-50%)}.ctt,.tb{position:absolute;top:50%}.tb{transform:translateY(-50%)}.lr{position:absolute;left:50%;transform:translateX(-50%)}.header_container{background-color:#eff2f7;height:60px;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:center;align-items:center;padding-left:20px}.avator{width:36px;height:36px;border-radius:50%;margin-right:37px}.el-dropdown-menu__item{text-align:center}",""])},210:function(e,t,r){var a=r(209);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r(188)("02d08ad4",a,!0)},211:function(e,t,r){r(210);var a=r(86)(r(208),r(212),null,null);e.exports=a.exports},212:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"header_container"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/manage"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.meta.nabs,function(t,a){return r("el-breadcrumb-item",{key:a},[e._v(e._s(t))])})],2),e._v(" "),r("el-dropdown",{attrs:{"menu-align":"start"},on:{command:e.handleCommand}},[r("img",{staticClass:"avator",attrs:{src:e.baseUrl+e.adminInfo.avatar}}),e._v(" "),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",{attrs:{command:"home"}},[e._v("首页")]),e._v(" "),r("el-dropdown-item",{attrs:{command:"singout"}},[e._v("退出")])],1)],1)],1)},staticRenderFns:[]}},301:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(51),n=r.n(a),o=r(50),i=r.n(o),s=r(49),l=r.n(s),d=r(211),u=r.n(d),c=r(87),m=r(88);t.default={data:function(){return{baseUrl:m.a,limit:10,count:0,tableData:[],tableItem:{},tableFoodData:[],currentPage:1,queryForm:{speciesId:"",name:""},customerList:[],customerItem:{},showAddFood:!1,subOrderForm:{id:null,name:"",customerId:"",remarks:"",mainOrderId:null},subOrderRules:{name:[{required:!0,message:"请输入食品名称",trigger:"blur"}],customerId:[{type:"number",required:!0,message:"请选择客户",trigger:"blur"}]},unitList:[{value:1,label:"元/斤"},{value:2,label:"元/瓶"},{value:3,label:"元/袋"},{value:4,label:"元/只"},{value:5,label:"元/个"}],showAddCategory:!1,multipleSelection:[],menuOptions:[],controls:!1,menuSelectOptions:[],dialogFormVisible:!1}},components:{headTop:u.a},created:function(){},activated:function(){this.initData()},computed:{},methods:{handleSizeChange:function(e){console.log("每页 "+e+" 条")},handleCurrentChange:function(e){this.currentPage=e,this.getFoods()},handleSelectionChange:function(e){this.multipleSelection=e},handleDelete:function(e,t){this.tableFoodData.splice(e,1)},chooseCustomer:function(e){var t=this;return l()(i.a.mark(function a(){var n,o;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(null!=t.subOrderForm.id){a.next=20;break}return a.prev=1,a.next=4,r.i(c.c)({customerId:e});case 4:if(n=a.sent,200!=n.code){a.next=14;break}if(null!=(o=n.data)){a.next=9;break}return a.abrupt("return",!1);case 9:t.subOrderForm={id:o.id,name:o.name,customerId:o.customerId,remarks:o.remarks,mainOrderId:o.mainOrderId},t.tableFoodData=[],o.list.forEach(function(e,r){t.tableFoodData.push({id:e.id,name:e.name,mainOrderId:e.mainOrderId,subOrderId:e.subOrderId,foodId:e.foodId,number:e.number,unitPrice:e.unitPrice,unitName:t.unitList[e.unitId-1].label})}),a.next=15;break;case 14:console.log(n);case 15:a.next=20;break;case 17:a.prev=17,a.t0=a.catch(1),console.log(a.t0);case 20:case"end":return a.stop()}},a,t,[[1,17]])}))()},handleSelection:function(){var e=this,t=[],r=[];if(0==this.multipleSelection)return this.$message({type:"warning",message:"请选择食品信息"}),!1;0===this.tableFoodData.length?this.multipleSelection.forEach(function(t,r){var a={};a.foodId=t.id,a.mainOrderId=e.subOrderForm.mainOrderId,a.name=t.name,a.speciesId=t.speciesId,a.speciesName=t.speciesName,a.details=t.details,a.imgLink=t.imgLink,a.unitPrice=t.price,a.unitId=t.unitId,a.unitName=e.unitList[t.unitId-1].label,e.tableFoodData.push(a)}):(this.multipleSelection.forEach(function(e,r){t.push(e.id)}),this.tableFoodData.forEach(function(e,a){t.indexOf(e.foodId)>=0&&r.push(e.foodId)}),this.multipleSelection.forEach(function(t,a){if(r.indexOf(t.id)<0){var n={};n.foodId=t.id,n.mainOrderId=e.subOrderForm.mainOrderId,n.name=t.name,n.speciesId=t.speciesId,n.speciesName=t.speciesName,n.details=t.details,n.imgLink=t.imgLink,n.unitPrice=t.price,n.unitId=t.unitId,n.unitName=e.unitList[t.unitId-1].label,e.tableFoodData.push(n)}})),this.dialogFormVisible=!this.dialogFormVisible},cancel:function(){this.$router.push("subOrderList")},handleQuery:function(){this.getFoods()},initData:function(){var e=this;return l()(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.subOrderForm={id:null,name:"",customerId:"",remarks:"",mainOrderId:null},e.tableFoodData=[],e.getCustomers(),e.getMenu(),e.getFoods(),e.subOrderForm.mainOrderId=e.$route.query.mainOrderId,void 0!=e.$route.query.subOrderId&&(e.subOrderForm.id=e.$route.query.subOrderId,e.getSubOrder());case 7:case"end":return t.stop()}},t,e)}))()},getMenu:function(){var e=this;return l()(i.a.mark(function t(){var a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.menuOptions=[],t.prev=1,t.next=4,r.i(c.d)();case 4:a=t.sent,(a.code=200)?(e.menuSelectOptions.push({label:"请选择分类",value:""}),a.data.forEach(function(t,r){e.menuOptions.push({label:t.name,value:t.id,index:r}),e.menuSelectOptions.push({label:t.name,value:t.id,index:r})})):console.log(a.message),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log("获取食品分类失败",t.t0);case 11:case"end":return t.stop()}},t,e,[[1,8]])}))()},getSubOrder:function(){var e=this;return l()(i.a.mark(function t(){var a,n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.i(c.e)({subOrderId:e.subOrderForm.id});case 3:a=t.sent,200==a.code?(n=a.data,e.subOrderForm={id:n.id,name:n.name,customerId:n.customerId,remarks:n.remarks,mainOrderId:n.mainOrderId},n.list.forEach(function(t,r){e.tableFoodData.push({id:t.id,name:t.name,mainOrderId:t.mainOrderId,subOrderId:t.subOrderId,foodId:t.foodId,number:t.number,unitPrice:t.unitPrice,unitName:e.unitList[t.unitId-1].label})})):console.log(a),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,e,[[0,7]])}))()},getCustomers:function(){var e=this;return l()(i.a.mark(function t(){var a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.i(c.f)();case 3:a=t.sent,200==a.code?(a.data.map(function(e,t){e.index=t,e.value=e.id,e.label=e.name}),e.customerList=a.data):console.log(a),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,e,[[0,7]])}))()},getFoods:function(){var e=this;return l()(i.a.mark(function t(){var a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.i(c.g)({pageNo:e.currentPage,pageSize:e.limit,speciesId:e.queryForm.speciesId,mainOrderId:e.subOrderForm.mainOrderId,name:e.queryForm.name});case 2:if(a=t.sent,200!=a.code){t.next=9;break}e.count=a.data.total,e.tableData=[],a.data.list.forEach(function(t,r){var a={};a.id=t.id,a.name=t.name,a.speciesId=t.speciesId,a.speciesName=t.speciesName,a.details=t.details,a.imgLink=t.imgLink,a.price=t.price,a.unitId=t.unitId,a.unitName=e.unitList[t.unitId-1].label,a.index=r,e.tableData.push(a)}),t.next=10;break;case 9:throw new Error(a.message);case 10:case"end":return t.stop()}},t,e)}))()},addFoodFun:function(){this.dialogFormVisible=!this.dialogFormVisible},addSubOrder:function(e){var t=this;this.$refs[e].validate(function(){var e=l()(i.a.mark(function e(a){var o,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=17;break}if(0!==t.tableFoodData.length){e.next=4;break}return t.$message({type:"warning",message:"请选择食品信息"}),e.abrupt("return",!1);case 4:return o=n()({},t.subOrderForm,{list:t.tableFoodData}),e.prev=5,e.next=8,r.i(c.h)(o);case 8:s=e.sent,200==s.code?(console.log(s),t.$message({type:"success",message:"添加成功"}),t.subOrderForm={name:"",details:"",imgLink:"",speciesId:"",feature:"",price:0,unitId:1},t.$router.push("subOrderList")):t.$message({type:"error",message:s.message}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),console.log(e.t0);case 15:e.next=19;break;case 17:return t.$notify.error({title:"错误",message:"请检查输入是否正确",offset:100}),e.abrupt("return",!1);case 19:case"end":return e.stop()}},e,t,[[5,12]])}));return function(t){return e.apply(this,arguments)}}())}}}},318:function(e,t,r){t=e.exports=r(187)(!1),t.push([e.i,".allcover{position:absolute;top:0;right:0}.ctt{left:50%;transform:translate(-50%,-50%)}.ctt,.tb{position:absolute;top:50%}.tb{transform:translateY(-50%)}.lr{position:absolute;left:50%;transform:translateX(-50%)}.form{min-width:400px;width:100%;margin-bottom:30px}.form:hover{box-shadow:0 0 8px 0 rgba(232,237,250,.6),0 2px 4px 0 rgba(232,237,250,.5);border-radius:6px;transition:all .4s}.food_form{border:1px solid #eaeefb;padding:10px 0}.form_header{text-align:center;margin-bottom:10px}.add_category_row{height:0;overflow:hidden;transition:all .4s;background:#f9fafc}.el-input-number{display:inline-block;width:80px;position:relative;line-height:normal}.showEdit{height:185px}.add_category{background:#f9fafc;padding:10px 30px 0 10px;border:1px solid #eaeefb;border-top:none}.species_select{width:100%;border:1px solid #eaeefb;padding:10px 30px 10px 10px;border-top-right-radius:6px;border-top-left-radius:6px}.add_Food_button{text-align:center;line-height:40px;border-bottom-right-radius:6px;border-bottom-left-radius:6px;border:1px solid #eaeefb;border-top:none;transition:all .4s;cursor:pointer}.add_Food_button:hover{background:#f9fafc}.add_Food_button:hover .edit_icon,.add_Food_button:hover span{color:#20a0ff}.add_Food_button span{font-size:14px;color:#999;transition:all .4s}.add_Food_button .edit_icon{color:#ccc;transition:all .4s}.avatar-uploader .el-upload{border:1px dashed #d9d9d9;border-radius:6px;cursor:pointer;position:relative;overflow:hidden}.avatar-uploader .el-upload:hover{border-color:#20a0ff}.avatar-uploader-icon{font-size:28px;color:#8c939d;width:120px;height:120px;line-height:120px;text-align:center}.avatar{width:120px;height:120px;display:block}.cell{text-align:center}",""])},422:function(e,t,r){var a=r(318);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r(188)("5d2de0e1",a,!0)},443:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("head-top"),e._v(" "),r("el-row",{staticStyle:{"margin-top":"20px"}},[r("el-col",{attrs:{span:14,offset:4}},[r("header",{staticClass:"form_header"},[e._v("添加配送分单")]),e._v(" "),r("el-form",{ref:"subOrderForm",staticClass:"form food_form",attrs:{model:e.subOrderForm,rules:e.subOrderRules,"label-width":"110px"}},[r("el-form-item",{attrs:{label:"分单名称",prop:"name"}},[r("el-input",{model:{value:e.subOrderForm.name,callback:function(t){e.$set(e.subOrderForm,"name",t)},expression:"subOrderForm.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"客户",prop:"customerId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:e.customerItem.label},on:{change:function(t){e.chooseCustomer(e.subOrderForm.customerId)}},model:{value:e.subOrderForm.customerId,callback:function(t){e.$set(e.subOrderForm,"customerId",t)},expression:"subOrderForm.customerId"}},e._l(e.customerList,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"分单备注",prop:"remarks"}},[r("el-input",{model:{value:e.subOrderForm.remarks,callback:function(t){e.$set(e.subOrderForm,"remarks",t)},expression:"subOrderForm.remarks"}})],1)],1),e._v(" "),r("header",{staticClass:"form_header"},[e._v("选择食品")]),e._v(" "),r("el-dialog",{attrs:{title:"选择食品信息"},model:{value:e.dialogFormVisible,callback:function(t){e.dialogFormVisible=t},expression:"dialogFormVisible"}},[r("div",{staticClass:"demo-input-size"},[r("el-row",{staticClass:"category_select2"},[r("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"食品名称"},model:{value:e.queryForm.name,callback:function(t){e.$set(e.queryForm,"name",t)},expression:"queryForm.name"}}),e._v(" "),r("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择食品分类"},model:{value:e.queryForm.speciesId,callback:function(t){e.$set(e.queryForm,"speciesId",t)},expression:"queryForm.speciesId"}},e._l(e.menuSelectOptions,function(e){return r("el-option",{key:e.value+"C",attrs:{label:e.label,value:e.value}})})),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.handleQuery}},[e._v("查询")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.handleSelection}},[e._v("确认")])],1)],1),e._v(" "),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-key":function(e){return e.index}},on:{"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),r("el-table-column",{attrs:{label:"图片",prop:"imgLink"},scopedSlots:e._u([{key:"default",fn:function(e){return[r("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:e.row.imgLink,alt:""}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"食品名称",prop:"name"}}),e._v(" "),r("el-table-column",{attrs:{label:"食品价格",prop:"price"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("label",[e._v(e._s(t.row.price+" "+t.row.unitName))])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"食品种类",prop:"speciesName"}})],1),e._v(" "),r("div",{staticClass:"Pagination"},[r("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":10,layout:"total, prev, pager, next",total:e.count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),r("div",{staticClass:"add_Food_button",on:{click:e.addFoodFun}},[r("span",[e._v("添加食品信息")])]),e._v(" "),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableFoodData,"row-key":function(e){return e.index}}},[r("el-table-column",{attrs:{type:"index",label:"序号",width:"80"}}),e._v(" "),r("el-table-column",{attrs:{label:"名称",prop:"name"}}),e._v(" "),r("el-table-column",{attrs:{label:"数量",prop:"number",width:"120px;"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input-number",{attrs:{controls:e.controls,size:"small",min:1,max:1e7},model:{value:t.row.number,callback:function(r){e.$set(t.row,"number",r)},expression:"scope.row.number"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"单价",prop:"unitPrice",width:"180px;"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input-number",{attrs:{controls:e.controls,size:"small",min:1,max:1e7},model:{value:t.row.unitPrice,callback:function(r){e.$set(t.row,"unitPrice",r)},expression:"scope.row.unitPrice"}}),e._v(" "),r("label",[e._v(e._s(t.row.unitName))])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"小计（元）",prop:"sum",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("label",[e._v(e._s(t.row.number*t.row.unitPrice))])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"操作",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(r){e.handleDelete(t.$index,t.row)}}},[e._v("删除\n                                    ")])]}}])})],1),e._v(" "),r("div",{staticStyle:{margin:"20px 10px"},attrs:{align:"center"}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addSubOrder("subOrderForm")}}},[e._v("保存")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.cancel()}}},[e._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]}}});