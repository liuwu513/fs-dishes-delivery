webpackJsonp([12],{196:function(e,t,a){a(430);var o=a(86)(a(307),a(453),null,null);e.exports=o.exports},210:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a(50),r=a.n(o),n=a(49),i=a.n(n),s=a(51),l=a.n(s),c=a(87),u=a(88),d=a(89);t.default={data:function(){return{baseUrl:u.a}},created:function(){this.adminInfo.id||this.getAdminData()},computed:l()({},a.i(d.b)(["adminInfo"])),methods:l()({},a.i(d.c)(["getAdminData"]),{handleCommand:function(e){var t=this;return i()(r.a.mark(function o(){var n;return r.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if("home"!=e){o.next=4;break}t.$router.push("/manage"),o.next=9;break;case 4:if("singout"!=e){o.next=9;break}return o.next=7,a.i(c.b)();case 7:n=o.sent,1==n.status?(t.$message({type:"success",message:"退出成功"}),t.$router.push("/")):t.$message({type:"error",message:n.message});case 9:case"end":return o.stop()}},o,t)}))()}})}},211:function(e,t,a){t=e.exports=a(187)(!1),t.push([e.i,".allcover{position:absolute;top:0;right:0}.ctt{left:50%;transform:translate(-50%,-50%)}.ctt,.tb{position:absolute;top:50%}.tb{transform:translateY(-50%)}.lr{position:absolute;left:50%;transform:translateX(-50%)}.header_container{background-color:#eff2f7;height:60px;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:center;align-items:center;padding-left:20px}.avator{width:36px;height:36px;border-radius:50%;margin-right:37px}.el-dropdown-menu__item{text-align:center}",""])},212:function(e,t,a){var o=a(211);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);a(188)("02d08ad4",o,!0)},213:function(e,t,a){a(212);var o=a(86)(a(210),a(214),null,null);e.exports=o.exports},214:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"header_container"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/manage"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.meta.nabs,function(t,o){return a("el-breadcrumb-item",{key:o},[e._v(e._s(t))])})],2),e._v(" "),a("el-dropdown",{attrs:{"menu-align":"start"},on:{command:e.handleCommand}},[a("img",{staticClass:"avator",attrs:{src:e.baseUrl+e.adminInfo.avatar}}),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"home"}},[e._v("首页")]),e._v(" "),a("el-dropdown-item",{attrs:{command:"singout"}},[e._v("退出")])],1)],1)],1)},staticRenderFns:[]}},307:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a(50),r=a.n(o),n=a(49),i=a.n(n),s=a(213),l=a.n(s),c=a(87),u=a(88);t.default={data:function(){return{baseUrl:u.a,limit:10,count:0,tableData:[],tableItem:{},tableFoodData:[],currentPage:1,disabled:!0,queryForm:{speciesId:"",name:""},customerList:[],customerItem:{},showAddFood:!1,custFoodForm:{id:null,name:"",customerId:"",remarks:"",mainOrderId:null},custFormRules:{customerId:[{type:"number",required:!0,message:"请选择客户",trigger:"blur"}]},unitList:[{value:1,label:"元/斤"},{value:2,label:"元/瓶"},{value:3,label:"元/袋"},{value:4,label:"元/只"},{value:5,label:"元/个"},{value:6,label:"元/板"},{value:7,label:"元/包"},{value:8,label:"元/块"},{value:9,label:"元/件"},{value:10,label:"元/箱"}],showAddCategory:!1,multipleSelection:[],menuOptions:[],controls:!1,menuSelectOptions:[],dialogFormVisible:!1}},components:{headTop:l.a},created:function(){},activated:function(){this.initData()},computed:{},methods:{handleSizeChange:function(e){console.log("每页 "+e+" 条")},handleCurrentChange:function(e){this.currentPage=e,this.getFoods()},handleSelectionChange:function(e){this.multipleSelection=e},handleDelete:function(e,t){this.tableFoodData.splice(e,1)},handleSelection:function(){var e=this,t=[],a=[];if(0==this.multipleSelection)return this.$message({type:"warning",message:"请选择食品信息"}),!1;0===this.tableFoodData.length?this.multipleSelection.forEach(function(t,a){var o={};o.foodId=t.id,o.name=t.name,o.customerId=e.custFoodForm.customerId,o.unitPrice=t.price,o.unitId=t.unitId,o.unitName=e.unitList[t.unitId-1].label,e.tableFoodData.push(o)}):(this.multipleSelection.forEach(function(e,a){t.push(e.id)}),this.tableFoodData.forEach(function(e,o){t.indexOf(e.foodId)>=0&&a.push(e.foodId)}),this.multipleSelection.forEach(function(t,o){if(a.indexOf(t.id)<0){var r={};r.foodId=t.id,r.mainOrderId=e.custFoodForm.customerId,r.name=t.name,r.speciesId=t.speciesId,r.speciesName=t.speciesName,r.details=t.details,r.imgLink=t.imgLink,r.unitPrice=t.price,r.unitId=t.unitId,r.unitName=e.unitList[t.unitId-1].label,e.tableFoodData.push(r)}})),this.dialogFormVisible=!this.dialogFormVisible},chooseCustomer:function(e){},cancel:function(){this.menuSelectOptions=[],this.$router.push({path:"customerList"})},handleQuery:function(){this.getFoods()},initData:function(){var e=this;return i()(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=Number(e.$route.query.customerId),e.custFoodForm={customerId:a},e.tableFoodData=[],e.getCustomers(),e.getMenu(),e.getFoods(),void 0!=e.custFoodForm.customerId&&e.getCustFood();case 7:case"end":return t.stop()}},t,e)}))()},getMenu:function(){var e=this;return i()(r.a.mark(function t(){var o;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.menuOptions=[],t.prev=1,t.next=4,a.i(c.e)();case 4:o=t.sent,(o.code=200)?(e.menuSelectOptions.push({label:"请选择分类",value:""}),o.data.forEach(function(t,a){e.menuOptions.push({label:t.name,value:t.id,index:a}),e.menuSelectOptions.push({label:t.name,value:t.id,index:a})})):console.log(o.message),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log("获取食品分类失败",t.t0);case 11:case"end":return t.stop()}},t,e,[[1,8]])}))()},getCustFood:function(){var e=this;return i()(r.a.mark(function t(){var o,n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a.i(c.c)({customerId:e.custFoodForm.customerId});case 3:if(o=t.sent,200!=o.code){t.next=11;break}if(n=o.data,0!=n.length){t.next=8;break}return t.abrupt("return",!1);case 8:n.forEach(function(t,a){e.tableFoodData.push({id:t.id,name:t.foodName,customerId:t.customerId,foodId:t.foodId,number:t.number,unitPrice:t.unitPrice,unitName:e.unitList[t.unitId-1].label})}),t.next=12;break;case 11:console.log(o);case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),console.log(t.t0);case 17:case"end":return t.stop()}},t,e,[[0,14]])}))()},getCustomers:function(){var e=this;return i()(r.a.mark(function t(){var o;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a.i(c.g)();case 3:o=t.sent,200==o.code?(o.data.map(function(e,t){e.index=t,e.value=e.id,e.label=e.name}),e.customerList=o.data):console.log(o),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,e,[[0,7]])}))()},getFoods:function(){var e=this;return i()(r.a.mark(function t(){var o;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.i(c.h)({pageNo:e.currentPage,pageSize:e.limit,speciesId:e.queryForm.speciesId,name:e.queryForm.name});case 2:if(o=t.sent,200!=o.code){t.next=9;break}e.count=o.data.total,e.tableData=[],o.data.list.forEach(function(t,a){var o={};o.id=t.id,o.name=t.name,o.speciesId=t.speciesId,o.speciesName=t.speciesName,o.details=t.details,o.imgLink=t.imgLink,o.price=t.price,o.unitId=t.unitId,o.unitName=e.unitList[t.unitId-1].label,o.index=a,e.tableData.push(o)}),t.next=10;break;case 9:throw new Error(o.message);case 10:case"end":return t.stop()}},t,e)}))()},addFoodFun:function(){this.dialogFormVisible=!this.dialogFormVisible},addCustFood:function(e){var t=this;this.$refs[e].validate(function(){var e=i()(r.a.mark(function e(o){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=16;break}if(0!==t.tableFoodData.length){e.next=4;break}return t.$message({type:"warning",message:"请选择食品信息"}),e.abrupt("return",!1);case 4:return e.prev=4,e.next=7,a.i(c.q)(t.tableFoodData);case 7:n=e.sent,200==n.code?(console.log(n),t.$message({type:"success",message:"添加成功"}),t.$router.push({path:"customerList"}),t.custFoodForm={customerId:""},t.menuSelectOptions=[]):t.$message({type:"error",message:n.message}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),console.log(e.t0);case 14:e.next=18;break;case 16:return t.$notify.error({title:"错误",message:"请检查输入是否正确",offset:100}),e.abrupt("return",!1);case 18:case"end":return e.stop()}},e,t,[[4,11]])}));return function(t){return e.apply(this,arguments)}}())}}}},324:function(e,t,a){t=e.exports=a(187)(!1),t.push([e.i,".allcover{position:absolute;top:0;right:0}.ctt{left:50%;transform:translate(-50%,-50%)}.ctt,.tb{position:absolute;top:50%}.tb{transform:translateY(-50%)}.lr{position:absolute;left:50%;transform:translateX(-50%)}.form{min-width:650px;width:100%;margin-bottom:30px}.form:hover{box-shadow:0 0 8px 0 rgba(232,237,250,.6),0 2px 4px 0 rgba(232,237,250,.5);border-radius:6px;transition:all .4s}.food_form{border:1px solid #eaeefb;padding:10px 0}.el-dialog--small{min-width:680px}.el-table{overflow:hidden;max-width:100%;background-color:#fff;border:1px solid #dfe6ec;font-size:12px;color:#1f2d3d}.el-table,.form_header{width:100%;min-width:650px}.form_header{text-align:center;margin-bottom:10px}.add_category_row{height:0;overflow:hidden;transition:all .4s;background:#f9fafc}.el-input-number{display:inline-block;width:80px;position:relative;line-height:normal}.showEdit{height:185px}.add_category{background:#f9fafc;padding:10px 30px 0 10px;border:1px solid #eaeefb;border-top:none}.species_select{width:100%;border:1px solid #eaeefb;padding:10px 30px 10px 10px;border-top-right-radius:6px;border-top-left-radius:6px}.add_Food_button{min-width:650px;width:100%;text-align:center;line-height:40px;border-bottom-right-radius:6px;border-bottom-left-radius:6px;border:1px solid #eaeefb;border-top:none;transition:all .4s;cursor:pointer}.add_Food_button:hover{background:#f9fafc}.add_Food_button:hover .edit_icon,.add_Food_button:hover span{color:#20a0ff}.add_Food_button span{font-size:14px;color:#999;transition:all .4s}.add_Food_button .edit_icon{color:#ccc;transition:all .4s}.avatar-uploader .el-upload{border:1px dashed #d9d9d9;border-radius:6px;cursor:pointer;position:relative;overflow:hidden}.avatar-uploader .el-upload:hover{border-color:#20a0ff}.avatar-uploader-icon{font-size:28px;color:#8c939d;width:120px;height:120px;line-height:120px;text-align:center}.avatar{width:120px;height:120px;display:block}.cell{text-align:center}",""])},430:function(e,t,a){var o=a(324);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);a(188)("3ecc856c",o,!0)},453:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("head-top"),e._v(" "),a("el-row",{staticStyle:{"margin-top":"20px"}},[a("el-col",{attrs:{span:14,offset:2}},[a("header",{staticClass:"form_header"},[e._v("添加客户商品单")]),e._v(" "),a("el-form",{ref:"custFoodForm",staticClass:"form food_form",attrs:{model:e.custFoodForm,rules:e.custFormRules,"label-width":"110px"}},[a("el-form-item",{attrs:{label:"客户",prop:"customerId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:e.customerItem.label,disabled:e.disabled},model:{value:e.custFoodForm.customerId,callback:function(t){e.$set(e.custFoodForm,"customerId",t)},expression:"custFoodForm.customerId"}},e._l(e.customerList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),a("header",{staticClass:"form_header"},[e._v("选择食品")]),e._v(" "),a("el-dialog",{attrs:{title:"选择食品信息"},model:{value:e.dialogFormVisible,callback:function(t){e.dialogFormVisible=t},expression:"dialogFormVisible"}},[a("div",{staticClass:"demo-input-size"},[a("el-row",{staticClass:"category_select2"},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"食品名称"},model:{value:e.queryForm.name,callback:function(t){e.$set(e.queryForm,"name",t)},expression:"queryForm.name"}}),e._v(" "),a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择食品分类"},model:{value:e.queryForm.speciesId,callback:function(t){e.$set(e.queryForm,"speciesId",t)},expression:"queryForm.speciesId"}},e._l(e.menuSelectOptions,function(e){return a("el-option",{key:e.value+"F1",attrs:{label:e.label,value:e.value}})})),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleQuery}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleSelection}},[e._v("确认")])],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-key":function(e){return e.index}},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"食品名称",prop:"name"}}),e._v(" "),a("el-table-column",{attrs:{label:"食品价格",prop:"price"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("label",[e._v(e._s(t.row.price+" "+t.row.unitName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"食品种类",prop:"speciesName"}})],1),e._v(" "),a("div",{staticClass:"Pagination"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":10,layout:"total, prev, pager, next",total:e.count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("div",{staticClass:"add_Food_button",on:{click:e.addFoodFun}},[a("span",[e._v("添加食品信息")])]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableFoodData,"row-key":function(e){return e.index}}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{label:"名称",prop:"name"}}),e._v(" "),a("el-table-column",{attrs:{label:"数量",prop:"number",width:"120px;"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input-number",{attrs:{controls:e.controls,size:"small",min:1,max:1e7},model:{value:t.row.number,callback:function(a){e.$set(t.row,"number",a)},expression:"scope.row.number"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"单价",prop:"unitPrice",width:"180px;"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input-number",{attrs:{controls:e.controls,size:"small",min:1,max:1e7},model:{value:t.row.unitPrice,callback:function(a){e.$set(t.row,"unitPrice",a)},expression:"scope.row.unitPrice"}}),e._v(" "),a("label",[e._v(e._s(t.row.unitName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"小计（元）",prop:"sum",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("label",[e._v(e._s(t.row.number*t.row.unitPrice))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除\n                                    ")])]}}])})],1),e._v(" "),a("div",{staticStyle:{margin:"20px 10px",width:"650px"},attrs:{align:"center"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addCustFood("custFoodForm")}}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.cancel()}}},[e._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]}}});